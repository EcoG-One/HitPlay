<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vocabulary Match Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Nunito', sans-serif;
    }

    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
      50% { box-shadow: 0 0 20px 10px rgba(99, 102, 241, 0.2); }
    }

    @keyframes bounce-in {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.1); }
      70% { transform: scale(0.9); }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    @keyframes confetti-fall {
      0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    @keyframes celebrate-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes float-up {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
    }

    .card-selected {
      animation: pulse-glow 1.5s ease-in-out infinite;
    }

    .card-correct {
      animation: bounce-in 0.5s ease-out forwards;
    }

    .card-wrong {
      animation: shake 0.4s ease-in-out;
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      animation: confetti-fall 3s ease-out forwards;
    }

    .celebration-overlay {
      animation: celebrate-pulse 0.5s ease-in-out infinite;
    }

    .score-pop {
      animation: float-up 0.8s ease-out forwards;
    }

    .hint-highlight {
      box-shadow: 0 0 0 4px #fbbf24, 0 0 20px 8px rgba(251, 191, 36, 0.4);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full overflow-auto">
  <div id="app-wrapper" class="min-h-full w-full bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-4 md:p-8"><!-- Header -->
   <div class="text-center mb-6">
    <h1 id="game-title" class="text-3xl md:text-4xl font-extrabold text-white mb-2 drop-shadow-lg">üî∑ Geometry Match üî∑</h1>
    <p id="instruction-text" class="text-indigo-200 text-lg">Click a term, then click its matching definition!</p>
   </div><!-- Score & Progress -->
   <div class="flex justify-center gap-6 mb-6 flex-wrap">
    <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/20"><span class="text-indigo-200 text-sm">Score</span>
     <div id="score" class="text-3xl font-extrabold text-yellow-400">
      0
     </div>
    </div>
    <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/20"><span class="text-indigo-200 text-sm">Matches</span>
     <div id="matches" class="text-3xl font-extrabold text-emerald-400">
      0/6
     </div>
    </div>
    <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/20"><span class="text-indigo-200 text-sm">Hints</span>
     <div id="hints-left" class="text-3xl font-extrabold text-pink-400">
      3
     </div>
    </div>
   </div><!-- Hint Button -->
   <div class="flex justify-center mb-6"><button id="hint-btn" class="bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-300 hover:to-orange-400 text-gray-900 font-bold px-6 py-3 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center gap-2"> <span>üí°</span> <span id="hint-button-label">Need a Hint?</span> </button>
   </div><!-- Game Board -->
   <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-6"><!-- Terms Column -->
    <div>
     <h2 class="text-xl font-bold text-white mb-4 text-center flex items-center justify-center gap-2"><span class="w-3 h-3 bg-cyan-400 rounded-full"></span> Terms</h2>
     <div id="terms-container" class="space-y-3"><!-- Terms will be inserted here -->
     </div>
    </div><!-- Definitions Column -->
    <div>
     <h2 class="text-xl font-bold text-white mb-4 text-center flex items-center justify-center gap-2"><span class="w-3 h-3 bg-pink-400 rounded-full"></span> Definitions</h2>
     <div id="definitions-container" class="space-y-3"><!-- Definitions will be inserted here -->
     </div>
    </div>
   </div><!-- Feedback Message -->
   <div id="feedback" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none z-50 hidden">
    <div class="bg-white rounded-2xl px-8 py-6 shadow-2xl text-center">
     <div id="feedback-emoji" class="text-6xl mb-2"></div>
     <div id="feedback-text" class="text-2xl font-bold"></div>
    </div>
   </div><!-- Victory Screen -->
   <div id="victory-screen" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
    <div class="bg-gradient-to-br from-indigo-600 to-purple-700 rounded-3xl p-8 text-center shadow-2xl celebration-overlay max-w-md w-full">
     <div class="text-6xl mb-4">
      üéâüèÜüéâ
     </div>
     <h2 class="text-3xl font-extrabold text-white mb-2">Amazing Job!</h2>
     <p class="text-indigo-200 mb-4">You matched all the terms!</p>
     <div class="bg-white/20 rounded-2xl p-4 mb-6">
      <div class="text-indigo-200 text-sm">
       Final Score
      </div>
      <div id="final-score" class="text-5xl font-extrabold text-yellow-400">
       0
      </div>
     </div><button id="play-again-btn" class="bg-gradient-to-r from-emerald-400 to-cyan-500 hover:from-emerald-300 hover:to-cyan-400 text-gray-900 font-bold px-8 py-4 rounded-full text-xl shadow-lg transform hover:scale-105 transition-all duration-200"> Play Again! üîÑ </button>
    </div>
   </div><!-- Confetti Container -->
   <div id="confetti-container" class="fixed inset-0 pointer-events-none z-40 overflow-hidden"></div>
  </div>
  <script>
    // Vocabulary data
    const vocabularySet = [
      { id: 1, term: "Radius", definition: "The distance from the center of a circle to any point on its edge", emoji: "üìè", color: "from-cyan-400 to-blue-500" },
      { id: 2, term: "Perimeter", definition: "The total length of all sides of a shape added together", emoji: "üî≤", color: "from-emerald-400 to-teal-500" },
      { id: 3, term: "Vertex", definition: "A corner point where two or more lines meet", emoji: "üìç", color: "from-yellow-400 to-orange-500" },
      { id: 4, term: "Parallel", definition: "Lines that never cross and stay the same distance apart forever", emoji: "‚ûñ", color: "from-pink-400 to-rose-500" },
      { id: 5, term: "Symmetry", definition: "When one half of a shape is a mirror image of the other half", emoji: "ü¶ã", color: "from-violet-400 to-purple-500" },
      { id: 6, term: "Polygon", definition: "A closed flat shape with three or more straight sides", emoji: "‚¨°", color: "from-indigo-400 to-blue-600" }
    ];

    // Game state
    let gameState = {
      selectedTerm: null,
      selectedDefinition: null,
      matchedPairs: [],
      score: 0,
      hintsRemaining: 3
    };

    // Default config
    const defaultConfig = {
      game_title: "üî∑ Geometry Match üî∑",
      instruction_text: "Click a term, then click its matching definition!",
      hint_button_text: "Need a Hint?",
      background_color: "#312e81",
      card_color: "#ffffff",
      text_color: "#1e1b4b",
      accent_color: "#6366f1",
      highlight_color: "#f472b6",
      font_family: "Nunito"
    };

    // Shuffle array
    function shuffle(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    // Create confetti
    function createConfetti() {
      const container = document.getElementById('confetti-container');
      const colors = ['#f472b6', '#a78bfa', '#60a5fa', '#34d399', '#fbbf24', '#f87171'];

      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 0.5 + 's';
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        container.appendChild(confetti);

        setTimeout(() => confetti.remove(), 3000);
      }
    }

    // Show feedback
    function showFeedback(isCorrect) {
      const feedback = document.getElementById('feedback');
      const emoji = document.getElementById('feedback-emoji');
      const text = document.getElementById('feedback-text');

      if (isCorrect) {
        emoji.textContent = ['üéØ', '‚≠ê', '‚ú®', 'üåü', 'üí´'][Math.floor(Math.random() * 5)];
        text.textContent = ['Perfect!', 'Great!', 'Awesome!', 'Brilliant!', 'Correct!'][Math.floor(Math.random() * 5)];
        text.className = 'text-2xl font-bold text-emerald-500';
      } else {
        emoji.textContent = ['ü§î', 'üí≠', 'üîÑ'][Math.floor(Math.random() * 3)];
        text.textContent = ['Try again!', 'Not quite!', 'Keep trying!'][Math.floor(Math.random() * 3)];
        text.className = 'text-2xl font-bold text-rose-500';
      }

      feedback.classList.remove('hidden');
      setTimeout(() => feedback.classList.add('hidden'), 1000);
    }

    // Update score display
    function updateScore(points) {
      gameState.score += points;
      const scoreEl = document.getElementById('score');
      scoreEl.textContent = gameState.score;

      // Score pop animation
      const pop = document.createElement('div');
      pop.className = 'score-pop fixed text-yellow-400 font-bold text-2xl pointer-events-none';
      pop.textContent = '+' + points;
      pop.style.left = scoreEl.getBoundingClientRect().left + 'px';
      pop.style.top = scoreEl.getBoundingClientRect().top + 'px';
      document.body.appendChild(pop);
      setTimeout(() => pop.remove(), 800);
    }

    // Check for victory
    function checkVictory() {
      if (gameState.matchedPairs.length === vocabularySet.length) {
        setTimeout(() => {
          document.getElementById('final-score').textContent = gameState.score;
          document.getElementById('victory-screen').classList.remove('hidden');
          createConfetti();
        }, 500);
      }
    }

    // Handle term click
    function handleTermClick(termCard, termId) {
      if (gameState.matchedPairs.includes(termId)) return;

      // Clear previous selection
      document.querySelectorAll('.term-card').forEach(card => {
        card.classList.remove('card-selected', 'ring-4', 'ring-cyan-400');
      });

      gameState.selectedTerm = termId;
      termCard.classList.add('card-selected', 'ring-4', 'ring-cyan-400');

      // Try to match if definition is selected
      if (gameState.selectedDefinition !== null) {
        tryMatch();
      }
    }

    // Handle definition click
    function handleDefinitionClick(defCard, defId) {
      if (gameState.matchedPairs.includes(defId)) return;

      // Clear previous selection
      document.querySelectorAll('.definition-card').forEach(card => {
        card.classList.remove('card-selected', 'ring-4', 'ring-pink-400');
      });

      gameState.selectedDefinition = defId;
      defCard.classList.add('card-selected', 'ring-4', 'ring-pink-400');

      // Try to match if term is selected
      if (gameState.selectedTerm !== null) {
        tryMatch();
      }
    }

    // Try to match
    function tryMatch() {
      const termCard = document.querySelector(`.term-card[data-id="${gameState.selectedTerm}"]`);
      const defCard = document.querySelector(`.definition-card[data-id="${gameState.selectedDefinition}"]`);

      if (gameState.selectedTerm === gameState.selectedDefinition) {
        // Correct match!
        showFeedback(true);
        createConfetti();
        updateScore(100);

        gameState.matchedPairs.push(gameState.selectedTerm);

        termCard.classList.remove('card-selected', 'ring-4', 'ring-cyan-400');
        defCard.classList.remove('card-selected', 'ring-4', 'ring-pink-400');
        termCard.classList.add('card-correct', 'opacity-60', 'pointer-events-none');
        defCard.classList.add('card-correct', 'opacity-60', 'pointer-events-none');

        // Add checkmark
        termCard.querySelector('.match-indicator').classList.remove('hidden');
        defCard.querySelector('.match-indicator').classList.remove('hidden');

        document.getElementById('matches').textContent = `${gameState.matchedPairs.length}/6`;

        checkVictory();
      } else {
        // Wrong match
        showFeedback(false);
        termCard.classList.add('card-wrong');
        defCard.classList.add('card-wrong');

        setTimeout(() => {
          termCard.classList.remove('card-wrong', 'card-selected', 'ring-4', 'ring-cyan-400');
          defCard.classList.remove('card-wrong', 'card-selected', 'ring-4', 'ring-pink-400');
        }, 400);
      }

      gameState.selectedTerm = null;
      gameState.selectedDefinition = null;
    }

    // Use hint
    function useHint() {
      if (gameState.hintsRemaining <= 0) return;

      // Find an unmatched pair
      const unmatchedId = vocabularySet.find(v => !gameState.matchedPairs.includes(v.id))?.id;
      if (!unmatchedId) return;

      gameState.hintsRemaining--;
      document.getElementById('hints-left').textContent = gameState.hintsRemaining;

      if (gameState.hintsRemaining === 0) {
        document.getElementById('hint-btn').classList.add('opacity-50', 'cursor-not-allowed');
      }

      // Highlight matching pair
      const termCard = document.querySelector(`.term-card[data-id="${unmatchedId}"]`);
      const defCard = document.querySelector(`.definition-card[data-id="${unmatchedId}"]`);

      termCard.classList.add('hint-highlight');
      defCard.classList.add('hint-highlight');

      setTimeout(() => {
        termCard.classList.remove('hint-highlight');
        defCard.classList.remove('hint-highlight');
      }, 2000);
    }

    // Initialize game
    function initGame() {
      gameState = {
        selectedTerm: null,
        selectedDefinition: null,
        matchedPairs: [],
        score: 0,
        hintsRemaining: 3
      };

      document.getElementById('score').textContent = '0';
      document.getElementById('matches').textContent = '0/6';
      document.getElementById('hints-left').textContent = '3';
      document.getElementById('hint-btn').classList.remove('opacity-50', 'cursor-not-allowed');
      document.getElementById('victory-screen').classList.add('hidden');

      const termsContainer = document.getElementById('terms-container');
      const defsContainer = document.getElementById('definitions-container');

      termsContainer.innerHTML = '';
      defsContainer.innerHTML = '';

      const shuffledTerms = shuffle(vocabularySet);
      const shuffledDefs = shuffle(vocabularySet);

      // Create term cards
      shuffledTerms.forEach(item => {
        const card = document.createElement('div');
        card.className = `term-card bg-gradient-to-r ${item.color} p-4 rounded-2xl cursor-pointer transform hover:scale-102 hover:-translate-y-1 transition-all duration-200 shadow-lg relative`;
        card.setAttribute('data-id', item.id);
        card.innerHTML = `
          <div class="flex items-center gap-3">
            <span class="text-3xl">${item.emoji}</span>
            <span class="text-white font-bold text-lg">${item.term}</span>
          </div>
          <div class="match-indicator absolute top-2 right-2 hidden">
            <span class="text-2xl">‚úÖ</span>
          </div>
        `;
        card.addEventListener('click', () => handleTermClick(card, item.id));
        termsContainer.appendChild(card);
      });

      // Create definition cards
      shuffledDefs.forEach(item => {
        const card = document.createElement('div');
        card.className = 'definition-card bg-white/95 backdrop-blur-sm p-4 rounded-2xl cursor-pointer transform hover:scale-102 hover:-translate-y-1 transition-all duration-200 shadow-lg relative border-2 border-transparent hover:border-pink-300';
        card.setAttribute('data-id', item.id);
        card.innerHTML = `
          <p class="text-gray-700 font-medium">${item.definition}</p>
          <div class="match-indicator absolute top-2 right-2 hidden">
            <span class="text-2xl">‚úÖ</span>
          </div>
        `;
        card.addEventListener('click', () => handleDefinitionClick(card, item.id));
        defsContainer.appendChild(card);
      });
    }

    // Config change handler
    async function onConfigChange(config) {
      const font = config.font_family || defaultConfig.font_family;
      document.body.style.fontFamily = `${font}, sans-serif`;

      document.getElementById('game-title').textContent = config.game_title || defaultConfig.game_title;
      document.getElementById('instruction-text').textContent = config.instruction_text || defaultConfig.instruction_text;
      document.getElementById('hint-button-label').textContent = config.hint_button_text || defaultConfig.hint_button_text;

      // Apply colors
      const wrapper = document.getElementById('app-wrapper');
      const bgColor = config.background_color || defaultConfig.background_color;
      wrapper.style.background = `linear-gradient(135deg, ${bgColor}, ${adjustColor(bgColor, 20)}, ${adjustColor(bgColor, 40)})`;
    }

    // Helper to adjust color brightness
    function adjustColor(hex, percent) {
      const num = parseInt(hex.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = Math.min(255, (num >> 16) + amt);
      const G = Math.min(255, ((num >> 8) & 0x00FF) + amt);
      const B = Math.min(255, (num & 0x0000FF) + amt);
      return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }

    // Map to capabilities
    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (value) => { config.card_color = value; window.elementSdk.setConfig({ card_color: value }); }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); }
          },
          {
            get: () => config.highlight_color || defaultConfig.highlight_color,
            set: (value) => { config.highlight_color = value; window.elementSdk.setConfig({ highlight_color: value }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => { config.font_family = value; window.elementSdk.setConfig({ font_family: value }); }
        },
        fontSizeable: undefined
      };
    }

    // Map to edit panel values
    function mapToEditPanelValues(config) {
      return new Map([
        ["game_title", config.game_title || defaultConfig.game_title],
        ["instruction_text", config.instruction_text || defaultConfig.instruction_text],
        ["hint_button_text", config.hint_button_text || defaultConfig.hint_button_text]
      ]);
    }

    // Initialize SDK and game
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // Event listeners
    document.getElementById('hint-btn').addEventListener('click', useHint);
    document.getElementById('play-again-btn').addEventListener('click', initGame);

    // Start the game
    initGame();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bf2042f3506cb27',t:'MTc2ODYxMjY4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>